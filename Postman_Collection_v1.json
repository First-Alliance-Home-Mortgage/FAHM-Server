{
  "info": {
    "name": "FAHM API",
    "description": "FAHM Server REST API - Node.js/Express backend for loan application management (MongoDB-only; MSSQL removed)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      { "key": "token", "value": "{{authToken}}", "type": "string" }
    ]
  },
  "variable": [
    { "key": "rootUrl", "value": "http://localhost:4000" },
    { "key": "baseUrl", "value": "{{rootUrl}}/api/v1" },
    { "key": "authToken", "value": "" },
    { "key": "refreshToken", "value": "" },
    { "key": "name", "value": "Admin User" },
    { "key": "email", "value": "admin@fahmloans.com" },
    { "key": "password", "value": "Password123!" },
    { "key": "role", "value": "borrower" },
    { "key": "phone", "value": "5551234567" },
    { "key": "loanId", "value": "" },
    { "key": "borrowerId", "value": "" },
    { "key": "officerId", "value": "" },
    { "key": "documentId", "value": "" },
    { "key": "notificationId", "value": "" },
    { "key": "userId", "value": "" },
    { "key": "messageId", "value": "" },
    { "key": "contactId", "value": "" },
    { "key": "journeyId", "value": "" },
    { "key": "reportId", "value": "" },
    { "key": "ssn", "value": "123-45-6789" },
    { "key": "alertId", "value": "" },
    { "key": "snapshotId", "value": "" },
    { "key": "lockId", "value": "" },
    { "key": "dashboardId", "value": "" },
    { "key": "referralSourceId", "value": "" },
    { "key": "sessionId", "value": "" },
    { "key": "sessionToken", "value": "" },
    { "key": "applicationId", "value": "" },
    { "key": "preapprovalId", "value": "" },
    { "key": "consentId", "value": "" },
    { "key": "menuId", "value": "" },
    { "key": "menuAlias", "value": "dashboard" },
    { "key": "menuVersion", "value": "" },
    { "key": "roleId", "value": "" },
    { "key": "capabilityId", "value": "" },
    { "key": "screenSlug", "value": "dashboard" },
    { "key": "featureFlagKey", "value": "" },
    { "key": "attachmentId", "value": "" },
    { "key": "chatSessionId", "value": "" },
    { "key": "webhookSignature", "value": "" }
  ],
  "item": [
    {
      "name": "Health",
      "auth": { "type": "noauth" },
      "request": {
        "method": "GET",
        "url": "{{rootUrl}}/health"
      }
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "auth": { "type": "noauth" },
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/register",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{name}}\",\n  \"email\": \"{{email}}\",\n  \"password\": \"{{password}}\",\n  \"role\": \"{{role}}\",\n  \"phone\": \"{{phone}}\"\n}"
            }
          }
        },
        {
          "name": "Login",
          "auth": { "type": "noauth" },
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/login",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{email}}\",\n  \"password\": \"{{password}}\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "if (json.token) { pm.collectionVariables.set('authToken', json.token); }",
                  "if (json.refreshToken) { pm.collectionVariables.set('refreshToken', json.refreshToken); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token",
          "auth": { "type": "noauth" },
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/refresh",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "if (json.token) { pm.collectionVariables.set('authToken', json.token); }",
                  "if (json.refreshToken) { pm.collectionVariables.set('refreshToken', json.refreshToken); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Logout",
          "auth": { "type": "inherit" },
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/logout",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 204) {",
                  "  pm.collectionVariables.unset('authToken');",
                  "  pm.collectionVariables.unset('refreshToken');",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Loans",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "List Loans",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/loans?page=1&limit=20&sort=-createdAt",
              "host": ["{{baseUrl}}"],
              "path": ["loans"],
              "query": [
                { "key": "status", "value": "processing,underwriting", "description": "Comma-separated statuses", "disabled": true },
                { "key": "source", "value": "retail", "description": "Loan source: retail | tpo", "disabled": true },
                { "key": "assignedOfficer", "value": "{{officerId}}", "description": "Officer MongoDB ObjectId", "disabled": true },
                { "key": "q", "value": "", "description": "Search borrower name/email or property address", "disabled": true },
                { "key": "dateFrom", "value": "2024-01-01", "description": "Created date >= (ISO 8601)", "disabled": true },
                { "key": "dateTo", "value": "2025-12-31", "description": "Created date <= (ISO 8601)", "disabled": true },
                { "key": "page", "value": "1", "description": "Page number (default: 1)" },
                { "key": "limit", "value": "20", "description": "Page size, max 100 (default: 20)" },
                { "key": "sort", "value": "-createdAt", "description": "Sort field, prefix - for desc (default: -createdAt)" }
              ]
            },
            "description": "List loans with filtering, pagination, and sorting. Borrowers see only their own loans."
          }
        },
        {
          "name": "Create Loan",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/loans",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 250000,\n  \"borrower\": \"{{borrowerId}}\",\n  \"assignedOfficer\": \"{{officerId}}\",\n  \"propertyAddress\": \"123 Main St, City, ST 12345\",\n  \"status\": \"application\",\n  \"source\": \"retail\",\n  \"milestones\": [\n    { \"name\": \"Application Submitted\", \"status\": \"completed\" },\n    { \"name\": \"Documentation Review\", \"status\": \"in_progress\" },\n    { \"name\": \"Underwriting\", \"status\": \"pending\" }\n  ]\n}"
            }
          }
        },
        { "name": "Get Loan By Id", "request": { "method": "GET", "url": "{{baseUrl}}/loans/{{loanId}}" } },
        {
          "name": "Update Loan Status",
          "request": {
            "method": "PATCH",
            "url": "{{baseUrl}}/loans/{{loanId}}/status",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"underwriting\",\n  \"milestones\": [\n    { \"name\": \"Application Submitted\", \"status\": \"completed\" },\n    { \"name\": \"Documentation Review\", \"status\": \"completed\" },\n    { \"name\": \"Underwriting\", \"status\": \"in_progress\" },\n    { \"name\": \"Final Approval\", \"status\": \"pending\" }\n  ]\n}"
            }
          }
        },
        {
          "name": "Generate Pre-Approval",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/loans/{{loanId}}/preapproval"
          }
        }
      ]
    },
    {
      "name": "Documents",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        { "name": "List For Loan", "request": { "method": "GET", "url": "{{baseUrl}}/documents/{{loanId}}" } },
        {
          "name": "Upload Document",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/documents",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loan\": \"{{loanId}}\",\n  \"name\": \"W2_2024.pdf\",\n  \"type\": \"pdf\",\n  \"size\": 245760,\n  \"hash\": \"sha256:abc123def456\",\n  \"url\": \"https://storage.example.com/docs/w2_2024.pdf\"\n}"
            }
          }
        },
        { "name": "Mark Synced", "request": { "method": "POST", "url": "{{baseUrl}}/documents/{{documentId}}/synced" } }
      ]
    },
    {
      "name": "Notifications",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        { "name": "List Notifications", "request": { "method": "GET", "url": "{{baseUrl}}/notifications" } },
        {
          "name": "Create Notification",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/notifications",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"New Document Required\",\n  \"message\": \"Please upload your recent pay stubs\",\n  \"user\": \"{{userId}}\",\n  \"type\": \"document_request\",\n  \"forceSend\": false\n}"
            }
          }
        },
        { "name": "Mark Read", "request": { "method": "POST", "url": "{{baseUrl}}/notifications/{{notificationId}}/read" } }
      ]
    },
    {
      "name": "Users",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Register Push Token (Public)",
          "auth": { "type": "noauth" },
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/users/push-token",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"expoPushToken\": \"ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]\"\n}"
            }
          }
        },
        { "name": "Get Me", "request": { "method": "GET", "url": "{{baseUrl}}/users/me" } },
        {
          "name": "Update Me",
          "request": {
            "method": "PATCH",
            "url": "{{baseUrl}}/users/me",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Jane Doe Updated\",\n  \"phone\": \"5559876543\",\n  \"title\": \"Senior Loan Officer\"\n}"
            }
          }
        },
        {
          "name": "Upload Profile Picture",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/users/profile-picture",
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "file", "type": "file", "src": [] }
              ]
            }
          }
        },
        {
          "name": "List Users (Admin)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/users?page=1&limit=20&role=borrower&active=true&q=jane",
              "host": ["{{baseUrl}}"],
              "path": ["users"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" },
                { "key": "role", "value": "borrower" },
                { "key": "active", "value": "true" },
                { "key": "q", "value": "jane" }
              ]
            }
          }
        },
        {
          "name": "Create User (Admin)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/users",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"New User\",\n  \"email\": \"newuser@example.com\",\n  \"password\": \"secret123\",\n  \"role\": \"borrower\",\n  \"phone\": \"5551234567\"\n}"
            }
          }
        },
        {
          "name": "Get User by ID (Admin)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/users/{{userId}}"
          }
        },
        {
          "name": "Update User (Admin)",
          "request": {
            "method": "PATCH",
            "url": "{{baseUrl}}/users/{{userId}}",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"active\": true\n}"
            }
          }
        },
        {
          "name": "Delete User (Admin)",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/users/{{userId}}"
          }
        }
      ]
    },
    {
      "name": "Encompass Integration",
      "description": "Encompass LOS integration endpoints.\n\nAuth: OAuth 2.0 (Resource Owner Password Credentials for lenders, Client Credentials for ISV partners).\nRef: https://developer.icemortgagetechnology.com/developer-connect/docs/authentication",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Token Management",
          "item": [
            {
              "name": "Get Encompass Token",
              "request": { "method": "GET", "url": "{{baseUrl}}/encompass/encompassToken" }
            },
            {
              "name": "Introspect Encompass Token (Admin)",
              "request": {
                "method": "GET",
                "url": "{{baseUrl}}/encompass/token/introspect",
                "description": "Check whether the cached Encompass access token is still active. Returns token metadata including expiry, username, and instance ID. Admin only."
              }
            },
            {
              "name": "Revoke Encompass Token (Admin)",
              "request": {
                "method": "POST",
                "url": "{{baseUrl}}/encompass/token/revoke",
                "description": "Revoke the cached Encompass access token and clear the local cache. Useful for security rotation. Admin only."
              }
            }
          ]
        },
        {
          "name": "Connection",
          "item": [
            {
              "name": "Test Connection",
              "request": {
                "method": "GET",
                "url": "{{baseUrl}}/encompass/test-connection",
                "description": "Verify server can connect to Encompass API. Checks configuration, authentication, and API connectivity."
              }
            }
          ]
        },
        {
          "name": "Pipeline",
          "item": [
            {
              "name": "Query Pipeline",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{baseUrl}}/encompass/pipeline?start=0&limit=25&sortField=Fields.4002&sortOrder=desc",
                  "host": ["{{baseUrl}}"],
                  "path": ["encompass", "pipeline"],
                  "query": [
                    { "key": "loanFolder", "value": "My Pipeline", "description": "Encompass folder name", "disabled": true },
                    { "key": "status", "value": "Processing", "description": "Comma-separated milestones: Started, Processing, Submittal, Underwriting, Cond. Approval, Clear to Close, Closing, Funded, Purchased, Completion", "disabled": true },
                    { "key": "loanOfficer", "value": "", "description": "Loan officer name (contains match)", "disabled": true },
                    { "key": "borrowerName", "value": "", "description": "Borrower first or last name (contains match)", "disabled": true },
                    { "key": "dateFrom", "value": "2024-01-01", "description": "Application date >= (ISO 8601)", "disabled": true },
                    { "key": "dateTo", "value": "2025-12-31", "description": "Application date <= (ISO 8601)", "disabled": true },
                    { "key": "start", "value": "0", "description": "Pagination offset (default: 0)" },
                    { "key": "limit", "value": "25", "description": "Page size, max 100 (default: 25)" },
                    { "key": "sortField", "value": "Fields.4002", "description": "Encompass field ID to sort by (default: Fields.4002 = last modified)" },
                    { "key": "sortOrder", "value": "desc", "description": "Sort direction: asc | desc (default: desc)" }
                  ]
                },
                "description": "Query the Encompass LOS loan pipeline with filters, sorting, and pagination. Returns transformed results with local link status. Requires LO, Branch Manager, or Admin role."
              }
            },
            {
              "name": "Query Pipeline - By Status",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{baseUrl}}/encompass/pipeline?status=Processing&limit=10",
                  "host": ["{{baseUrl}}"],
                  "path": ["encompass", "pipeline"],
                  "query": [
                    { "key": "status", "value": "Processing" },
                    { "key": "limit", "value": "10" }
                  ]
                },
                "description": "Query pipeline filtered by milestone status."
              }
            },
            {
              "name": "Query Pipeline - By Borrower Name",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{baseUrl}}/encompass/pipeline?borrowerName=Smith&limit=25",
                  "host": ["{{baseUrl}}"],
                  "path": ["encompass", "pipeline"],
                  "query": [
                    { "key": "borrowerName", "value": "Smith" },
                    { "key": "limit", "value": "25" }
                  ]
                },
                "description": "Search pipeline by borrower name."
              }
            },
            {
              "name": "Query Pipeline - By Loan Officer",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{baseUrl}}/encompass/pipeline?loanOfficer=Jane&status=Processing,Underwriting&limit=25",
                  "host": ["{{baseUrl}}"],
                  "path": ["encompass", "pipeline"],
                  "query": [
                    { "key": "loanOfficer", "value": "Jane" },
                    { "key": "status", "value": "Processing,Underwriting" },
                    { "key": "limit", "value": "25" }
                  ]
                },
                "description": "Query pipeline filtered by loan officer and multiple statuses."
              }
            },
            {
              "name": "Get Pipeline Canonical Fields",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{baseUrl}}/encompass/pipeline/fields",
                  "host": ["{{baseUrl}}"],
                  "path": ["encompass", "pipeline", "fields"],
                  "query": [
                    { "key": "canonicalNames", "value": "Fields.4000,Fields.11,Loan.LoanFolder", "description": "Comma-separated canonical names to retrieve", "disabled": true },
                    { "key": "fieldIds", "value": "", "description": "Comma-separated field IDs to retrieve", "disabled": true }
                  ]
                },
                "description": "Get canonical field definitions for pipeline queries. Calls ICE GET /encompass/v3/loanPipeline/canonicalFields. Ref: https://developer.icemortgagetechnology.com/developer-connect/reference/get-canonical-names"
              }
            }
          ]
        },
        {
          "name": "Loan Operations",
          "item": [
            {
              "name": "Sync Loan from Encompass",
              "request": {
                "method": "POST",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/sync",
                "description": "Fetch and sync loan status, milestones, and contacts from Encompass LOS."
              }
            },
            {
              "name": "Link Loan to Encompass",
              "request": {
                "method": "POST",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/link",
                "header": [{ "key": "Content-Type", "value": "application/json" }],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"encompassLoanId\": \"12345678-1234-1234-1234-123456789012\"\n}"
                },
                "description": "Associate a FAHM loan with an Encompass loan GUID. LO/Admin only."
              }
            },
            {
              "name": "Unlink Loan from Encompass (Admin)",
              "request": {
                "method": "POST",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/unlink",
                "description": "Remove the Encompass association from a FAHM loan. Admin only."
              }
            },
            {
              "name": "Update Loan Status in Encompass",
              "request": {
                "method": "PATCH",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/status",
                "header": [{ "key": "Content-Type", "value": "application/json" }],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"underwriting\",\n  \"milestones\": [\n    { \"name\": \"Application Submitted\", \"status\": \"completed\" },\n    { \"name\": \"Underwriting\", \"status\": \"in_progress\" }\n  ]\n}"
                },
                "description": "Push loan status and milestone updates to Encompass. LO/Admin only."
              }
            },
            {
              "name": "Get Sync History",
              "request": {
                "method": "GET",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/sync-history",
                "description": "View sync log history for debugging and auditing. LO/Admin only."
              }
            }
          ]
        },
        {
          "name": "Contacts",
          "item": [
            {
              "name": "Get Loan Contacts",
              "request": {
                "method": "GET",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/contacts",
                "description": "Retrieve all assigned contacts for a loan (Loan Officer, Processor, Underwriter, Closer)."
              }
            }
          ]
        },
        {
          "name": "Messages",
          "item": [
            {
              "name": "Get Loan Messages",
              "request": {
                "method": "GET",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/messages",
                "description": "Retrieve secure in-app messages between borrowers and FAHM contacts."
              }
            },
            {
              "name": "Send Message",
              "request": {
                "method": "POST",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/messages",
                "header": [{ "key": "Content-Type", "value": "application/json" }],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"content\": \"Hi, I have a question about my loan application.\",\n  \"recipientId\": \"{{userId}}\",\n  \"messageType\": \"text\",\n  \"metadata\": {}\n}"
                },
                "description": "Send secure message to borrower or loan team. Messages are auto-logged to Encompass for compliance."
              }
            },
            {
              "name": "Mark Message Read",
              "request": {
                "method": "POST",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/messages/{{messageId}}/read",
                "description": "Mark a loan message as read by the recipient."
              }
            }
          ]
        },
        {
          "name": "Documents",
          "item": [
            {
              "name": "Get Encompass Documents",
              "request": {
                "method": "GET",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/documents",
                "description": "Retrieve list of documents attached to the loan in Encompass eFolder."
              }
            },
            {
              "name": "Upload Document to Encompass",
              "request": {
                "method": "POST",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/documents",
                "header": [{ "key": "Content-Type", "value": "application/json" }],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"base64Content\": \"JVBERi0xLjQK...\",\n  \"title\": \"W2 Form 2024\",\n  \"documentType\": \"Income\",\n  \"mimeType\": \"application/pdf\"\n}"
                },
                "description": "Upload a document to the loan in Encompass eFolder. Uses two-step upload (create metadata, then upload content)."
              }
            },
            {
              "name": "Download Encompass Document",
              "request": {
                "method": "GET",
                "url": "{{baseUrl}}/encompass/loans/{{loanId}}/documents/{{attachmentId}}/download",
                "description": "Download a specific document from Encompass eFolder."
              }
            }
          ]
        },
        {
          "name": "Webhook",
          "item": [
            {
              "name": "Encompass Webhook",
              "auth": { "type": "noauth" },
              "request": {
                "method": "POST",
                "url": "{{baseUrl}}/encompass/webhook",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "x-encompass-signature", "value": "{{webhookSignature}}", "description": "HMAC-SHA256 signature (optional, validated if ENCOMPASS_WEBHOOK_SECRET is configured)" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"eventType\": \"loan.milestone.updated\",\n  \"resourceType\": \"loan\",\n  \"resourceId\": \"12345678-1234-1234-1234-123456789012\",\n  \"data\": {\n    \"status\": \"underwriting\"\n  }\n}"
                },
                "description": "Receive real-time updates from Encompass. Supports: loan.milestone.updated, loan.status.changed, loan.contacts.updated."
              }
            }
          ]
        }
      ]
    },
    {
      "name": "CRM Integration",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        { 
          "name": "Sync Contacts", 
          "request": { 
            "method": "POST", 
            "url": "{{baseUrl}}/crm/sync/contacts" 
          } 
        },
        { 
          "name": "Get CRM Contacts", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/crm/contacts" 
          } 
        },
        { 
          "name": "Get Contact Engagement", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/crm/contacts/{{contactId}}/engagement" 
          } 
        },
        { 
          "name": "Sync Journeys", 
          "request": { 
            "method": "POST", 
            "url": "{{baseUrl}}/crm/sync/journeys" 
          } 
        },
        { 
          "name": "Get Journeys", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/crm/journeys" 
          } 
        },
        {
          "name": "Enroll in Journey",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/crm/contacts/{{contactId}}/journeys/{{journeyId}}/enroll",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"metadata\": {\n    \"source\": \"mobile_app\",\n    \"campaign\": \"spring_2024\"\n  }\n}"
            }
          }
        },
        {
          "name": "Trigger Milestone Journey",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/crm/loans/{{loanId}}/trigger-milestone-journey",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"milestone\": \"underwriting_approved\"\n}"
            }
          }
        },
        {
          "name": "Log Activity",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/crm/contacts/{{contactId}}/activities",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"activityType\": \"email\",\n  \"direction\": \"outbound\",\n  \"subject\": \"Pre-approval letter sent\",\n  \"content\": \"Sent pre-approval letter for $350,000\",\n  \"metadata\": {\n    \"loanAmount\": 350000,\n    \"propertyAddress\": \"123 Main St\"\n  }\n}"
            }
          }
        },
        { 
          "name": "Get Activity History", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/crm/contacts/{{contactId}}/activities?limit=50&skip=0" 
          } 
        },
        { 
          "name": "Get Sync Logs", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/crm/sync/logs?limit=50" 
          } 
        }
      ]
    },
    {
      "name": "Credit Reporting",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Request Credit Report",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/credit/loans/{{loanId}}/request",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"borrowerId\": \"{{borrowerId}}\",\n  \"ssn\": \"{{ssn}}\",\n  \"dateOfBirth\": \"1985-06-15\",\n  \"address\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"Portland\",\n    \"state\": \"OR\",\n    \"zip\": \"97201\"\n  },\n  \"pullType\": \"hard\",\n  \"purpose\": \"preapproval\",\n  \"borrowerConsent\": {\n    \"obtained\": true,\n    \"consentDate\": \"2025-12-12T10:00:00Z\"\n  }\n}"
            }
          }
        },
        { 
          "name": "Get Credit Report", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/credit/reports/{{reportId}}" 
          } 
        },
        { 
          "name": "Get Credit Report with Raw Data", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/credit/reports/{{reportId}}?includeRawData=true" 
          } 
        },
        { 
          "name": "Get Credit Reports for Loan", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/credit/loans/{{loanId}}/reports" 
          } 
        },
        { 
          "name": "Reissue Credit Report", 
          "request": { 
            "method": "POST", 
            "url": "{{baseUrl}}/credit/reports/{{reportId}}/reissue" 
          } 
        },
        { 
          "name": "Get Credit Pull Logs", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/credit/logs?limit=50" 
          } 
        },
        { 
          "name": "Purge Expired Reports (Admin)", 
          "request": { 
            "method": "POST", 
            "url": "{{baseUrl}}/credit/expired/purge" 
          } 
        }
      ]
    },
    {
      "name": "Rate & Pricing",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Get Current Rates",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/rates/current?loanAmount=300000&productType=conventional&loanTerm=30&creditScore=740&ltv=80"
          }
        },
        { 
          "name": "Get Rate History", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/rates/history?productType=conventional&loanTerm=30&limit=50" 
          } 
        },
        { 
          "name": "Get Product Pricing", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/rates/products?productType=conventional&loanTerm=30" 
          } 
        },
        {
          "name": "Create Rate Alert",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/rates/alerts",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productType\": \"conventional\",\n  \"loanTerm\": 30,\n  \"targetRate\": 6.5,\n  \"triggerType\": \"below\",\n  \"notificationMethod\": \"all\",\n  \"loan\": \"{{loanId}}\"\n}"
            }
          }
        },
        { 
          "name": "Get User Rate Alerts", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/rates/alerts?status=active" 
          } 
        },
        {
          "name": "Update Rate Alert",
          "request": {
            "method": "PUT",
            "url": "{{baseUrl}}/rates/alerts/{{alertId}}",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"targetRate\": 6.25,\n  \"notificationMethod\": \"push\"\n}"
            }
          }
        },
        { 
          "name": "Cancel Rate Alert", 
          "request": { 
            "method": "DELETE", 
            "url": "{{baseUrl}}/rates/alerts/{{alertId}}" 
          } 
        },
        { 
          "name": "Check Rate Alerts (LO Only)", 
          "request": { 
            "method": "POST", 
            "url": "{{baseUrl}}/rates/alerts/check" 
          } 
        },
        {
          "name": "Submit Rate Lock",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/rates/locks",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"rateSnapshotId\": \"{{snapshotId}}\",\n  \"lockPeriod\": 45,\n  \"notes\": \"Locking at market rate before weekend\"\n}"
            }
          }
        },
        { 
          "name": "Get Rate Locks for Loan", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/rates/locks/loan/{{loanId}}" 
          } 
        },
        {
          "name": "Extend Rate Lock (LO Only)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/rates/locks/{{lockId}}/extend",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"extensionDays\": 15,\n  \"reason\": \"Closing date postponed due to appraisal delay\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Performance Dashboard",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Get Available Reports",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/dashboard/reports"
          }
        },
        {
          "name": "Get Report Embed Config",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/dashboard/reports/{{dashboardId}}/embed"
          }
        },
        {
          "name": "Get My KPIs",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/dashboard/my-kpis?periodType=monthly"
          }
        },
        {
          "name": "Get Dashboard Metrics",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/dashboard/metrics?periodType=monthly&metricType=applications"
          }
        },
        {
          "name": "Get Branch Performance (BM Only)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/dashboard/branch-performance?periodType=monthly"
          }
        },
        {
          "name": "Get Regional Performance (Admin Only)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/dashboard/regional-performance?periodType=monthly"
          }
        },
        {
          "name": "Get Leaderboard",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/dashboard/leaderboard?metricType=applications&periodType=monthly&limit=10"
          }
        },
        {
          "name": "Refresh Report Dataset (BM/Admin Only)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/dashboard/reports/{{dashboardId}}/refresh"
          }
        }
      ]
    },
    {
      "name": "Calculator",
      "item": [
        {
          "name": "Calculate Mortgage Payment",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/calculator",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 400000,\n  \"downPayment\": 80000,\n  \"rate\": 6.5,\n  \"termYears\": 30,\n  \"taxesAnnual\": 4800,\n  \"insuranceAnnual\": 1200,\n  \"hoaMonthly\": 150,\n  \"closingCosts\": 8000,\n  \"includeAmortization\": true\n}"
            }
          }
        },
        {
          "name": "Get Current Rates from Optimal Blue",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/calculator/rates?loanAmount=300000&productType=conventional&loanTerm=30&creditScore=740&ltv=80",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Get Amortization Schedule",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/calculator/amortization",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 320000,\n  \"rate\": 6.5,\n  \"termYears\": 30,\n  \"startMonth\": 1,\n  \"monthsToGenerate\": 12\n}"
            }
          }
        },
        {
          "name": "Get Full Amortization (360 months)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/calculator/amortization",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 320000,\n  \"rate\": 6.5,\n  \"termYears\": 30,\n  \"startMonth\": 1,\n  \"monthsToGenerate\": 360\n}"
            }
          }
        },
        {
          "name": "Generate Apply Now Link",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/calculator/apply",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanAmount\": 320000,\n  \"propertyValue\": 400000,\n  \"productType\": \"conventional\",\n  \"loanTerm\": 30,\n  \"estimatedRate\": 6.5\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Document Upload",
      "item": [
        {
          "name": "Get Presigned Upload URL",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/document-uploads/presign",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"documentType\": \"paystub\",\n  \"mimeType\": \"application/pdf\",\n  \"fileName\": \"paystub_jan_2026.pdf\",\n  \"fileSize\": 245760\n}"
            }
          }
        },
        {
          "name": "Upload Documents to Loan",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/document-uploads/upload",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "loanId", "value": "{{loanId}}", "type": "text" },
                { "key": "documentType", "value": "paystub", "type": "text" },
                { "key": "description", "value": "Recent paystubs", "type": "text" },
                { "key": "posSystem", "value": "blend", "type": "text" },
                { "key": "files", "type": "file", "src": [] }
              ]
            }
          }
        },
        {
          "name": "Get Documents for Loan",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/document-uploads/loan/{{loanId}}?status=synced&documentType=paystub",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Get Document Details",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/document-uploads/{{documentId}}",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Download Document",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/document-uploads/{{documentId}}/download",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Delete Document",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/document-uploads/{{documentId}}",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Retry POS Sync (LO/Admin)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/document-uploads/{{documentId}}/retry-sync",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"posSystem\": \"blend\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Business Cards",
      "item": [
        {
          "name": "Create or Update My Business Card",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/business-cards",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nmls\": \"123456\",\n  \"title\": \"Senior Loan Officer\",\n  \"bio\": \"Helping families achieve homeownership for over 10 years\",\n  \"phone\": \"555-123-4567\",\n  \"email\": \"john.doe@fahm.com\",\n  \"branch\": {\n    \"name\": \"FAHM Downtown Branch\",\n    \"address\": \"123 Main St\",\n    \"city\": \"Los Angeles\",\n    \"state\": \"CA\",\n    \"zip\": \"90001\",\n    \"phone\": \"555-100-2000\"\n  },\n  \"socialLinks\": {\n    \"linkedin\": \"https://linkedin.com/in/johndoe\",\n    \"facebook\": \"https://facebook.com/johndoe\"\n  },\n  \"branding\": {\n    \"partnerLogo\": \"https://partner.com/logo.png\",\n    \"partnerName\": \"ABC Realty Partners\"\n  },\n  \"isPublic\": true\n}"
            }
          }
        },
        {
          "name": "Get My Business Card",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/business-cards/me",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Get Business Card by Slug (Public)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/business-cards/slug/john-doe"
          }
        },
        {
          "name": "Get My Analytics",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/business-cards/me/analytics",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Track Apply Now Click",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/business-cards/slug/john-doe/apply"
          }
        },
        {
          "name": "Track Share",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/business-cards/slug/john-doe/share",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"method\": \"qr\"\n}"
            }
          }
        },
        {
          "name": "Regenerate QR Code",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/business-cards/me/regenerate-qr",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "List All Business Cards (Admin/BM)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/business-cards?page=1&limit=20&search=john",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Delete My Business Card",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/business-cards/me",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        }
      ]
    },
    {
      "name": "Preapproval Letters",
      "item": [
        {
          "name": "Generate Preapproval Letter",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/preapproval/generate",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"validityDays\": 90,\n  \"conditions\": [\n    {\n      \"description\": \"Subject to satisfactory appraisal of the property\",\n      \"required\": true\n    },\n    {\n      \"description\": \"Subject to verification of employment and income\",\n      \"required\": true\n    },\n    {\n      \"description\": \"Subject to clear title and homeowner's insurance\",\n      \"required\": true\n    }\n  ],\n  \"branding\": {\n    \"partnerLogo\": \"https://partner.com/logo.png\",\n    \"partnerName\": \"ABC Realty Partners\",\n    \"primaryColor\": \"#003B5C\",\n    \"secondaryColor\": \"#FF6B35\"\n  }\n}"
            }
          }
        },
        {
          "name": "Get Preapproval Letters by Loan",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/preapproval/loan/{{loanId}}",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Get Preapproval Letter Details",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/preapproval/{{preapprovalId}}",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Download Preapproval Letter PDF",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/preapproval/{{preapprovalId}}/download",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Share Preapproval Letter via Email",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/preapproval/{{preapprovalId}}/share",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"method\": \"email\",\n  \"recipient\": \"borrower@example.com\"\n}"
            }
          }
        },
        {
          "name": "Share Preapproval Letter via SMS",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/preapproval/{{preapprovalId}}/share",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"method\": \"sms\",\n  \"recipient\": \"+15555555555\"\n}"
            }
          }
        },
        {
          "name": "Generate Shareable Link",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/preapproval/{{preapprovalId}}/share",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"method\": \"link\"\n}"
            }
          }
        },
        {
          "name": "Regenerate Preapproval Letter",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/preapproval/{{preapprovalId}}/regenerate",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Delete Preapproval Letter",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/preapproval/{{preapprovalId}}",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        }
      ]
    },
    {
      "name": "Consent Management",
      "item": [
        {
          "name": "Request Consent from Borrower",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/consent/request",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"borrowerId\": \"{{borrowerId}}\",\n  \"loanId\": \"{{loanId}}\",\n  \"dataScope\": {\n    \"personalInfo\": true,\n    \"financialInfo\": false,\n    \"loanDetails\": true,\n    \"documents\": false,\n    \"milestones\": true,\n    \"communications\": true\n  },\n  \"purpose\": \"referral_partnership\",\n  \"purposeDescription\": \"To provide updates on loan progress and coordinate closing timeline\",\n  \"expirationDays\": 365\n}"
            }
          }
        },
        {
          "name": "Grant Consent (Borrower Approves)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/consent/{{consentId}}/grant",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Revoke Consent",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/consent/{{consentId}}/revoke",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"No longer working with this partner\"\n}"
            }
          }
        },
        {
          "name": "Get My Consents",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/consent?status=active",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Get Consent Details",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/consent/{{consentId}}",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Check Access to Borrower Data",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/consent/check-access?borrowerId={{borrowerId}}&dataScope=loanDetails",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Log Consent Access",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/consent/{{consentId}}/log-access",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"details\": \"Viewed loan status and milestones\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Persona Views",
      "item": [
        {
          "name": "Get My Persona View Configuration",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/persona-views/me",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Update My Persona View",
          "request": {
            "method": "PATCH",
            "url": "{{baseUrl}}/persona-views/me",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"viewConfiguration\": {\n    \"dashboard\": {\n      \"layout\": \"grid\",\n      \"defaultFilters\": {\n        \"dateRange\": \"last-30-days\",\n        \"status\": [\"in_progress\", \"underwriting\"]\n      }\n    },\n    \"preferences\": {\n      \"theme\": \"dark\"\n    }\n  }\n}"
            }
          }
        },
        {
          "name": "Reset Persona View to Default",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/persona-views/me/reset",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        },
        {
          "name": "Get Persona-Specific Dashboard Data",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/persona-views/dashboard",
            "header": [
              { "key": "Authorization", "value": "Bearer {{authToken}}" }
            ]
          }
        }
      ]
    },
    {
      "name": "Referral Sources",
      "item": [
        {
          "name": "Create Referral Source",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Smith\",\n  \"type\": \"realtor\",\n  \"companyName\": \"Smith Realty Group\",\n  \"email\": \"john@smithrealty.com\",\n  \"phone\": \"+15555551234\",\n  \"website\": \"https://www.smithrealty.com\",\n  \"branding\": {\n    \"logo\": \"https://storage.azure.com/logos/smith-realty.png\",\n    \"primaryColor\": \"#1E3A8A\",\n    \"secondaryColor\": \"#F59E0B\",\n    \"tagline\": \"Your Trusted Real Estate Partner\"\n  },\n  \"partnershipTier\": \"gold\",\n  \"status\": \"active\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/referral-sources",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources"]
            }
          }
        },
        {
          "name": "Get All Referral Sources",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/referral-sources?status=active&page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources"],
              "query": [
                {
                  "key": "status",
                  "value": "active"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Get Referral Source by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/referral-sources/:id",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{referralSourceId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Update Referral Source",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.updated@smithrealty.com\",\n  \"phone\": \"+15555555678\",\n  \"partnershipTier\": \"platinum\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/referral-sources/:id",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{referralSourceId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Referral Source Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/referral-sources/:id/analytics?startDate=2025-01-01&endDate=2025-12-31&periodType=monthly",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources", ":id", "analytics"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2025-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2025-12-31"
                },
                {
                  "key": "periodType",
                  "value": "monthly"
                }
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "{{referralSourceId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Top Performers",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/referral-sources/top-performers?limit=10&metric=revenue.totalLoanVolume",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources", "top-performers"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "metric",
                  "value": "revenue.totalLoanVolume"
                }
              ]
            }
          }
        },
        {
          "name": "Get Branding Config (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/referral-sources/:id/branding",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources", ":id", "branding"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{referralSourceId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Update Branding",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"branding\": {\n    \"logo\": \"https://storage.azure.com/logos/smith-realty-new.png\",\n    \"primaryColor\": \"#1E40AF\",\n    \"secondaryColor\": \"#F59E0B\",\n    \"tagline\": \"Building Dreams, One Home at a Time\"\n  },\n  \"coBrandingSettings\": {\n    \"enablePreapprovalLetters\": true,\n    \"enableBusinessCards\": true,\n    \"enableEmailCommunications\": true\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/referral-sources/:id/branding",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources", ":id", "branding"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{referralSourceId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Track Activity",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"activityType\": \"funded\",\n  \"loanAmount\": 350000,\n  \"productType\": \"conventional\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/referral-sources/:id/track",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources", ":id", "track"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{referralSourceId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Delete Referral Source",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/referral-sources/:id",
              "host": ["{{baseUrl}}"],
              "path": ["referral-sources", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{referralSourceId}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "POS Link",
      "item": [
        {
          "name": "Generate POS Link",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"posSystem\": \"blend\",\n  \"purpose\": \"new_application\",\n  \"source\": \"mobile_app\",\n  \"expirationMinutes\": 60,\n  \"returnUrl\": \"https://app.fahm.com/dashboard\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos-link/generate",
              "host": ["{{baseUrl}}"],
              "path": ["pos-link", "generate"]
            }
          }
        },
        {
          "name": "Activate Session",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sessionToken\": \"{{sessionToken}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos-link/activate/:sessionId",
              "host": ["{{baseUrl}}"],
              "path": ["pos-link", "activate", ":sessionId"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Track Event",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"eventType\": \"page_view\",\n  \"details\": {\n    \"page\": \"application_start\",\n    \"timestamp\": \"2025-12-12T10:00:00Z\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos-link/track/:sessionId",
              "host": ["{{baseUrl}}"],
              "path": ["pos-link", "track", ":sessionId"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        },
        {
          "name": "POS Callback",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"oauthToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"completionData\": {\n    \"applicationId\": \"APP123456\",\n    \"loanNumber\": \"LN00123456\",\n    \"encompassLoanId\": \"ENC789012\",\n    \"status\": \"submitted\",\n    \"completedSteps\": [\"personal_info\", \"employment\", \"assets\", \"property\"],\n    \"documentsSubmitted\": [\n      {\n        \"documentType\": \"paystub\",\n        \"fileName\": \"paystub_2025_12.pdf\",\n        \"uploadedAt\": \"2025-12-12T11:30:00Z\"\n      }\n    ]\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos-link/callback/:sessionId",
              "host": ["{{baseUrl}}"],
              "path": ["pos-link", "callback", ":sessionId"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Session",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/pos-link/session/:sessionId",
              "host": ["{{baseUrl}}"],
              "path": ["pos-link", "session", ":sessionId"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Session Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/pos-link/analytics/:sessionId",
              "host": ["{{baseUrl}}"],
              "path": ["pos-link", "analytics", ":sessionId"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get My Sessions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/pos-link/my-sessions?status=active&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["pos-link", "my-sessions"],
              "query": [
                {
                  "key": "status",
                  "value": "active"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Get LO Sessions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/pos-link/lo-sessions?page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["pos-link", "lo-sessions"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            }
          }
        },
        {
          "name": "Cancel Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"User changed their mind\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos-link/cancel/:sessionId",
              "host": ["{{baseUrl}}"],
              "path": ["pos-link", "cancel", ":sessionId"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "SMS",
      "auth": {
        "type": "bearer",
        "bearer": [
          {
            "key": "token",
            "value": "{{authToken}}",
            "type": "string"
          }
        ]
      },
      "item": [
        {
          "name": "Send SMS",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"to\": \"+12025551234\",\n  \"body\": \"Your loan application has been approved! Contact your loan officer for next steps.\",\n  \"loanId\": \"{{loanId}}\",\n  \"messageType\": \"notification\",\n  \"purpose\": \"loan_update\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/sms/send",
              "host": ["{{baseUrl}}"],
              "path": ["sms", "send"]
            }
          }
        },
        {
          "name": "Get Conversation",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sms/conversation/:phone?limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["sms", "conversation", ":phone"],
              "query": [
                {
                  "key": "limit",
                  "value": "50"
                }
              ],
              "variable": [
                {
                  "key": "phone",
                  "value": "+12025551234"
                }
              ]
            }
          }
        },
        {
          "name": "Get Loan Messages",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sms/loan/:loanId?page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["sms", "loan", ":loanId"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ],
              "variable": [
                {
                  "key": "loanId",
                  "value": "{{loanId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get My Messages",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sms/my-messages?page=1&limit=50&direction=outbound",
              "host": ["{{baseUrl}}"],
              "path": ["sms", "my-messages"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                },
                {
                  "key": "direction",
                  "value": "outbound"
                }
              ]
            }
          }
        },
        {
          "name": "Mark Message as Read",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sms/:messageId/read",
              "host": ["{{baseUrl}}"],
              "path": ["sms", ":messageId", "read"],
              "variable": [
                {
                  "key": "messageId",
                  "value": "{{messageId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get SMS Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sms/stats?startDate=2024-01-01&endDate=2024-12-31&loanId={{loanId}}",
              "host": ["{{baseUrl}}"],
              "path": ["sms", "stats"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                },
                {
                  "key": "loanId",
                  "value": "{{loanId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Sync to Encompass (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sms/sync-to-encompass",
              "host": ["{{baseUrl}}"],
              "path": ["sms", "sync-to-encompass"]
            }
          }
        },
        {
          "name": "Twilio Inbound Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded",
                "type": "text"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "MessageSid",
                  "value": "SM1234567890abcdef",
                  "type": "text"
                },
                {
                  "key": "From",
                  "value": "+12025551234",
                  "type": "text"
                },
                {
                  "key": "To",
                  "value": "+18005551234",
                  "type": "text"
                },
                {
                  "key": "Body",
                  "value": "What is the status of my loan?",
                  "type": "text"
                },
                {
                  "key": "NumMedia",
                  "value": "0",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/sms/webhook/receive",
              "host": ["{{baseUrl}}"],
              "path": ["sms", "webhook", "receive"]
            }
          }
        },
        {
          "name": "Twilio Status Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded",
                "type": "text"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "MessageSid",
                  "value": "SM1234567890abcdef",
                  "type": "text"
                },
                {
                  "key": "MessageStatus",
                  "value": "delivered",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/sms/webhook/status",
              "host": ["{{baseUrl}}"],
              "path": ["sms", "webhook", "status"]
            }
          }
        }
      ]
    },
    {
      "name": "Rate Alerts",
      "auth": {
        "type": "bearer",
        "bearer": [
          {
            "key": "token",
            "value": "{{authToken}}",
            "type": "string"
          }
        ]
      },
      "item": [
        {
          "name": "Create Rate Alert",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productType\": \"conventional\",\n  \"loanTerm\": 30,\n  \"loanAmount\": 300000,\n  \"creditScore\": 740,\n  \"ltv\": 80,\n  \"propertyType\": \"single_family\",\n  \"triggerType\": \"below\",\n  \"targetRate\": 6.5,\n  \"notificationMethod\": \"all\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/rate-alerts",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts"]
            }
          }
        },
        {
          "name": "Get Rate Alerts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/rate-alerts?status=active&page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts"],
              "query": [
                {
                  "key": "status",
                  "value": "active"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            }
          }
        },
        {
          "name": "Get Alert Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/rate-alerts/stats",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts", "stats"]
            }
          }
        },
        {
          "name": "Get Single Alert",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/rate-alerts/:alertId",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts", ":alertId"],
              "variable": [
                {
                  "key": "alertId",
                  "value": "{{alertId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Update Alert",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"targetRate\": 6.25,\n  \"notificationMethod\": \"sms\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/rate-alerts/:alertId",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts", ":alertId"],
              "variable": [
                {
                  "key": "alertId",
                  "value": "{{alertId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Delete Alert",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/rate-alerts/:alertId",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts", ":alertId"],
              "variable": [
                {
                  "key": "alertId",
                  "value": "{{alertId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Check Current Rate",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/rate-alerts/:alertId/check-rate",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts", ":alertId", "check-rate"],
              "variable": [
                {
                  "key": "alertId",
                  "value": "{{alertId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Trigger Alert Check",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/rate-alerts/:alertId/trigger-check",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts", ":alertId", "trigger-check"],
              "variable": [
                {
                  "key": "alertId",
                  "value": "{{alertId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Pause Alert",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/rate-alerts/:alertId/pause",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts", ":alertId", "pause"],
              "variable": [
                {
                  "key": "alertId",
                  "value": "{{alertId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Resume Alert",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/rate-alerts/:alertId/resume",
              "host": ["{{baseUrl}}"],
              "path": ["rate-alerts", ":alertId", "resume"],
              "variable": [
                {
                  "key": "alertId",
                  "value": "{{alertId}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Chatbot",
      "item": [
        {
          "name": "Start Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"initialMessage\": \"What's the status of my loan?\",\n  \"deviceType\": \"mobile\",\n  \"voiceEnabled\": false\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/chatbot/start",
              "host": ["{{baseUrl}}"],
              "path": ["chatbot", "start"]
            }
          }
        },
        {
          "name": "Send Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sessionId\": \"{{sessionId}}\",\n  \"message\": \"What documents do I need to upload?\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/chatbot/message",
              "host": ["{{baseUrl}}"],
              "path": ["chatbot", "message"]
            }
          }
        },
        {
          "name": "Get Session",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chatbot/session/:sessionId",
              "host": ["{{baseUrl}}"],
              "path": ["chatbot", "session", ":sessionId"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get User Sessions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chatbot/sessions?status=active&limit=10&page=1",
              "host": ["{{baseUrl}}"],
              "path": ["chatbot", "sessions"],
              "query": [
                {
                  "key": "status",
                  "value": "active"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "page",
                  "value": "1"
                }
              ]
            }
          }
        },
        {
          "name": "Escalate Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Need help understanding underwriting decision\",\n  \"escalationType\": \"in_app_chat\",\n  \"urgency\": \"high\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/chatbot/session/:sessionId/escalate",
              "host": ["{{baseUrl}}"],
              "path": ["chatbot", "session", ":sessionId", "escalate"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Close Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"satisfactionRating\": 5,\n  \"feedback\": \"Very helpful, got all my questions answered!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/chatbot/session/:sessionId/close",
              "host": ["{{baseUrl}}"],
              "path": ["chatbot", "session", ":sessionId", "close"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Stats (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chatbot/stats?startDate=2025-01-01&endDate=2025-12-31",
              "host": ["{{baseUrl}}"],
              "path": ["chatbot", "stats"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2025-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2025-12-31"
                }
              ]
            }
          }
        },
        {
          "name": "Get Escalated Sessions (LO)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/chatbot/escalated",
              "host": ["{{baseUrl}}"],
              "path": ["chatbot", "escalated"]
            }
          }
        },
        {
          "name": "Resolve Session (LO)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resolutionNotes\": \"Explained underwriting decision and provided timeline for next steps. Borrower satisfied.\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/chatbot/session/:sessionId/resolve",
              "host": ["{{baseUrl}}"],
              "path": ["chatbot", "session", ":sessionId", "resolve"],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{sessionId}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Messages",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Get My Messages",
          "request": { "method": "GET", "url": "{{baseUrl}}/messages/my-messages" }
        },
        {
          "name": "Get Messages for Loan",
          "request": { "method": "GET", "url": "{{baseUrl}}/messages/loan/{{loanId}}" }
        },
        {
          "name": "Get Message by ID",
          "request": { "method": "GET", "url": "{{baseUrl}}/messages/{{messageId}}" }
        },
        {
          "name": "Create Message",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/messages",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"recipientId\": \"{{userId}}\",\n  \"content\": \"Hello, I have a question about my loan.\",\n  \"messageType\": \"text\"\n}"
            }
          }
        },
        {
          "name": "Mark Message as Read",
          "request": { "method": "PATCH", "url": "{{baseUrl}}/messages/{{messageId}}/read" }
        },
        {
          "name": "Delete Message",
          "request": { "method": "DELETE", "url": "{{baseUrl}}/messages/{{messageId}}" }
        }
      ]
    },
    {
      "name": "Menus",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Get All Menus",
          "request": { "method": "GET", "url": "{{baseUrl}}/menus" }
        },
        {
          "name": "Get Menu Roles (Admin)",
          "request": { "method": "GET", "url": "{{baseUrl}}/menus/roles" }
        },
        {
          "name": "Get Grouped Menus",
          "request": { "method": "GET", "url": "{{baseUrl}}/menus/grouped" }
        },
        {
          "name": "Get Menu Versions (Admin)",
          "request": { "method": "GET", "url": "{{baseUrl}}/menus/versions" }
        },
        {
          "name": "Get Menu by ID",
          "request": { "method": "GET", "url": "{{baseUrl}}/menus/{{menuId}}" }
        },
        {
          "name": "Get Menu by Alias",
          "request": { "method": "GET", "url": "{{baseUrl}}/menus/alias/{{menuAlias}}" }
        },
        {
          "name": "Create Menu (Admin)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/menus",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"New Menu Item\",\n  \"alias\": \"new-menu\",\n  \"icon\": \"home\",\n  \"route\": \"/new-menu\",\n  \"order\": 10,\n  \"isVisible\": true,\n  \"roles\": [\"admin\", \"loan_officer_retail\"]\n}"
            }
          }
        },
        {
          "name": "Update Menu (Admin)",
          "request": {
            "method": "PUT",
            "url": "{{baseUrl}}/menus/{{menuId}}",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Menu Item\",\n  \"icon\": \"settings\",\n  \"order\": 5,\n  \"isVisible\": true\n}"
            }
          }
        },
        {
          "name": "Toggle Menu Visibility (Admin)",
          "request": { "method": "PATCH", "url": "{{baseUrl}}/menus/{{menuId}}/visibility" }
        },
        {
          "name": "Delete Menu (Admin)",
          "request": { "method": "DELETE", "url": "{{baseUrl}}/menus/{{menuId}}" }
        },
        {
          "name": "Restore Menu Version (Admin)",
          "request": { "method": "POST", "url": "{{baseUrl}}/menus/restore/{{menuVersion}}" }
        },
        {
          "name": "Reset Menus to Defaults (Admin)",
          "request": { "method": "POST", "url": "{{baseUrl}}/menus/reset" }
        }
      ]
    },
    {
      "name": "Menu Config",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Get Menu Configuration",
          "request": { "method": "GET", "url": "{{baseUrl}}/menu-config" }
        },
        {
          "name": "Replace Menu Configuration (Admin)",
          "request": {
            "method": "PUT",
            "url": "{{baseUrl}}/menu-config",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"menus\": [\n    {\n      \"title\": \"Dashboard\",\n      \"alias\": \"dashboard\",\n      \"icon\": \"home\",\n      \"route\": \"/dashboard\",\n      \"order\": 1,\n      \"isVisible\": true,\n      \"roles\": [\"admin\", \"loan_officer_retail\", \"borrower\"]\n    }\n  ]\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Roles (Admin)",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "List All Roles",
          "request": { "method": "GET", "url": "{{baseUrl}}/roles" }
        },
        {
          "name": "Create Role",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/roles",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Custom Role\",\n  \"slug\": \"custom_role\",\n  \"description\": \"A custom role with specific capabilities\",\n  \"capabilities\": [\"{{capabilityId}}\"]\n}"
            }
          }
        },
        {
          "name": "Update Role",
          "request": {
            "method": "PUT",
            "url": "{{baseUrl}}/roles/{{roleId}}",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Role\",\n  \"description\": \"Updated description\",\n  \"capabilities\": [\"{{capabilityId}}\"]\n}"
            }
          }
        },
        {
          "name": "Delete Role",
          "request": { "method": "DELETE", "url": "{{baseUrl}}/roles/{{roleId}}" }
        }
      ]
    },
    {
      "name": "Capabilities (Admin)",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "List All Capabilities",
          "request": { "method": "GET", "url": "{{baseUrl}}/capabilities" }
        },
        {
          "name": "Get Capability by ID",
          "request": { "method": "GET", "url": "{{baseUrl}}/capabilities/{{capabilityId}}" }
        },
        {
          "name": "Create Capability",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/capabilities",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"dashboard:view\",\n  \"description\": \"Ability to view dashboard reports\",\n  \"category\": \"dashboard\"\n}"
            }
          }
        },
        {
          "name": "Update Capability",
          "request": {
            "method": "PUT",
            "url": "{{baseUrl}}/capabilities/{{capabilityId}}",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"dashboard:manage\",\n  \"description\": \"Ability to manage dashboard reports\",\n  \"category\": \"dashboard\"\n}"
            }
          }
        },
        {
          "name": "Delete Capability",
          "request": { "method": "DELETE", "url": "{{baseUrl}}/capabilities/{{capabilityId}}" }
        }
      ]
    },
    {
      "name": "CMS",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Get Dashboard Screen",
          "request": { "method": "GET", "url": "{{baseUrl}}/cms/screens/dashboard" }
        },
        {
          "name": "List All Screens",
          "request": { "method": "GET", "url": "{{baseUrl}}/cms/screens" }
        },
        {
          "name": "Get Screen by Slug",
          "request": { "method": "GET", "url": "{{baseUrl}}/cms/screens/{{screenSlug}}" }
        },
        {
          "name": "Create Screen (Admin)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/cms/screens",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"slug\": \"new-screen\",\n  \"title\": \"New Screen\",\n  \"description\": \"A new CMS screen\",\n  \"components\": [],\n  \"roles\": [\"admin\", \"loan_officer_retail\"]\n}"
            }
          }
        },
        {
          "name": "Update Screen (Admin)",
          "request": {
            "method": "PATCH",
            "url": "{{baseUrl}}/cms/screens/{{screenSlug}}",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Screen Title\",\n  \"components\": []\n}"
            }
          }
        },
        {
          "name": "Publish Screen (Admin)",
          "request": { "method": "POST", "url": "{{baseUrl}}/cms/screens/{{screenSlug}}/publish" }
        },
        {
          "name": "List Navigation Configs",
          "request": { "method": "GET", "url": "{{baseUrl}}/cms/navigation-configs" }
        },
        {
          "name": "Upsert Navigation Config (Admin)",
          "request": {
            "method": "PUT",
            "url": "{{baseUrl}}/cms/navigation-configs",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"borrower\",\n  \"navigation\": [\n    { \"label\": \"Dashboard\", \"route\": \"/dashboard\", \"icon\": \"home\" },\n    { \"label\": \"My Loans\", \"route\": \"/loans\", \"icon\": \"file-text\" }\n  ]\n}"
            }
          }
        },
        {
          "name": "List Feature Flags",
          "request": { "method": "GET", "url": "{{baseUrl}}/cms/feature-flags" }
        },
        {
          "name": "Upsert Feature Flags (Admin)",
          "request": {
            "method": "PUT",
            "url": "{{baseUrl}}/cms/feature-flags",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"flags\": [\n    { \"key\": \"enable_chatbot\", \"enabled\": true, \"roles\": [\"borrower\"] },\n    { \"key\": \"enable_dark_mode\", \"enabled\": false, \"roles\": [] }\n  ]\n}"
            }
          }
        },
        {
          "name": "Toggle Feature Flag (Admin)",
          "request": {
            "method": "PATCH",
            "url": "{{baseUrl}}/cms/feature-flags/{{featureFlagKey}}",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"enabled\": true\n}"
            }
          }
        },
        {
          "name": "List Component Registry",
          "request": { "method": "GET", "url": "{{baseUrl}}/cms/component-registry" }
        }
      ]
    },
    {
      "name": "Audit Logs",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Get Consent Audit Logs",
          "request": { "method": "GET", "url": "{{baseUrl}}/audit-logs/consent" }
        },
        {
          "name": "Get CRM Audit Logs",
          "request": { "method": "GET", "url": "{{baseUrl}}/audit-logs/crm" }
        },
        {
          "name": "Get Credit Audit Logs",
          "request": { "method": "GET", "url": "{{baseUrl}}/audit-logs/credit" }
        }
      ]
    },
    {
      "name": "Content Updates (WebSocket)",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        {
          "name": "Broadcast Content Update (Admin)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/content-updates/notify",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"content_updated\",\n  \"screenId\": \"{{screenSlug}}\",\n  \"roles\": [\"borrower\", \"loan_officer_retail\"]\n}"
            }
          }
        },
        {
          "name": "Broadcast Screen Updated (Admin)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/content-updates/screen-updated",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"screenId\": \"{{screenSlug}}\"\n}"
            }
          }
        },
        {
          "name": "Broadcast Menu Updated (Admin)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/content-updates/menu-updated"
          }
        },
        {
          "name": "Get WebSocket Status (Admin)",
          "request": { "method": "GET", "url": "{{baseUrl}}/content-updates/status" }
        }
      ]
    },
    {
      "name": "POS Integration",
      "item": [
        {
          "name": "Create Handoff Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos/handoff",
              "host": ["{{baseUrl}}"],
              "path": ["pos", "handoff"]
            }
          }
        },
        {
          "name": "Initiate POS Application (Blend)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.applicationId) {",
                  "        pm.collectionVariables.set('applicationId', response.applicationId);",
                  "        console.log('Application ID saved:', response.applicationId);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"posSystem\": \"blend\",\n  \"returnUrl\": \"https://app.fahm.com/dashboard\",\n  \"logoUrl\": \"https://fahm.com/logo.png\",\n  \"primaryColor\": \"#003B5C\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos/initiate",
              "host": ["{{baseUrl}}"],
              "path": ["pos", "initiate"]
            }
          }
        },
        {
          "name": "Initiate POS Application (Big POS)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.applicationId) {",
                  "        pm.collectionVariables.set('applicationId', response.applicationId);",
                  "        console.log('Application ID saved:', response.applicationId);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"posSystem\": \"big_pos\",\n  \"returnUrl\": \"https://app.fahm.com/dashboard\",\n  \"logoUrl\": \"https://fahm.com/logo.png\",\n  \"primaryColor\": \"#003B5C\",\n  \"secondaryColor\": \"#FF6B35\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos/initiate",
              "host": ["{{baseUrl}}"],
              "path": ["pos", "initiate"]
            }
          }
        },
        {
          "name": "Get Application Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/pos/application/:applicationId/status?posSystem=blend",
              "host": ["{{baseUrl}}"],
              "path": ["pos", "application", ":applicationId", "status"],
              "query": [
                {
                  "key": "posSystem",
                  "value": "blend",
                  "description": "Change to 'big_pos' for Big POS system"
                }
              ],
              "variable": [
                {
                  "key": "applicationId",
                  "value": "{{applicationId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Sync Borrower Data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"posSystem\": \"blend\",\n  \"borrowerData\": {\n    \"firstName\": \"Jane\",\n    \"lastName\": \"Doe\",\n    \"email\": \"jane.doe@example.com\",\n    \"phone\": \"555-123-4567\",\n    \"ssn\": \"123-45-6789\",\n    \"dateOfBirth\": \"1985-05-15\",\n    \"address\": {\n      \"street\": \"123 Main St\",\n      \"city\": \"Anytown\",\n      \"state\": \"CA\",\n      \"zip\": \"90210\"\n    },\n    \"employment\": {\n      \"employer\": \"Tech Corp\",\n      \"jobTitle\": \"Software Engineer\",\n      \"monthlyIncome\": 8500,\n      \"yearsEmployed\": 3\n    }\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos/application/:applicationId/sync-borrower",
              "host": ["{{baseUrl}}"],
              "path": ["pos", "application", ":applicationId", "sync-borrower"],
              "variable": [
                {
                  "key": "applicationId",
                  "value": "{{applicationId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Get Documents",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/pos/application/:applicationId/documents?posSystem=blend",
              "host": ["{{baseUrl}}"],
              "path": ["pos", "application", ":applicationId", "documents"],
              "query": [
                {
                  "key": "posSystem",
                  "value": "blend",
                  "description": "Change to 'big_pos' for Big POS system"
                }
              ],
              "variable": [
                {
                  "key": "applicationId",
                  "value": "{{applicationId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Submit Application",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"posSystem\": \"big_pos\",\n  \"submissionData\": {\n    \"notes\": \"Requesting priority review for first-time homebuyer\",\n    \"urgency\": \"high\",\n    \"requestedClosingDate\": \"2025-03-15\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos/application/:applicationId/submit",
              "host": ["{{baseUrl}}"],
              "path": ["pos", "application", ":applicationId", "submit"],
              "variable": [
                {
                  "key": "applicationId",
                  "value": "{{applicationId}}"
                }
              ]
            }
          }
        },
        {
          "name": "Blend Webhook Test",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Blend-Signature",
                "value": "test_signature",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"eventType\": \"application.submitted\",\n  \"applicationId\": \"app_12345\",\n  \"timestamp\": \"2025-01-15T12:00:00Z\",\n  \"data\": {\n    \"status\": \"submitted\",\n    \"borrower\": {\n      \"firstName\": \"Jane\",\n      \"lastName\": \"Doe\",\n      \"email\": \"jane.doe@example.com\"\n    }\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos/webhooks/blend",
              "host": ["{{baseUrl}}"],
              "path": ["pos", "webhooks", "blend"]
            }
          }
        },
        {
          "name": "Big POS Webhook Test",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-BigPOS-Signature",
                "value": "test_signature",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"eventType\": \"application.submitted\",\n  \"applicationId\": \"app_12345\",\n  \"timestamp\": \"2025-01-15T12:00:00Z\",\n  \"data\": {\n    \"status\": \"submitted\",\n    \"confirmationNumber\": \"CNF-2025-001\",\n    \"applicant\": {\n      \"firstName\": \"Jane\",\n      \"lastName\": \"Doe\",\n      \"email\": \"jane.doe@example.com\"\n    }\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/pos/webhooks/big-pos",
              "host": ["{{baseUrl}}"],
              "path": ["pos", "webhooks", "big-pos"]
            }
          }
        }
      ]
    }
  ]
}