{
  "info": {
    "name": "FAHM API",
    "description": "FAHM Server REST API - Node.js/Express backend for loan application management",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "rootUrl", "value": "http://localhost:4000" },
    { "key": "baseUrl", "value": "{{rootUrl}}/api/v1" },
    { "key": "authToken", "value": "" },
    { "key": "name", "value": "Jane Doe" },
    { "key": "email", "value": "jane@example.com" },
    { "key": "password", "value": "secret123" },
    { "key": "role", "value": "borrower" },
    { "key": "phone", "value": "5551234567" },
    { "key": "loanId", "value": "" },
    { "key": "borrowerId", "value": "" },
    { "key": "officerId", "value": "" },
    { "key": "documentId", "value": "" },
    { "key": "notificationId", "value": "" },
    { "key": "userId", "value": "" }
  ],
  "item": [
    {
      "name": "Health",
      "request": {
        "method": "GET",
        "url": "{{rootUrl}}/health"
      }
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/register",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{name}}\",\n  \"email\": \"{{email}}\",\n  \"password\": \"{{password}}\",\n  \"role\": \"{{role}}\",\n  \"phone\": \"{{phone}}\"\n}"
            }
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/login",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{email}}\",\n  \"password\": \"{{password}}\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Loans",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        { "name": "List Loans", "request": { "method": "GET", "url": "{{baseUrl}}/loans" } },
        {
          "name": "Create Loan",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/loans",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 250000,\n  \"borrower\": \"{{borrowerId}}\",\n  \"assignedOfficer\": \"{{officerId}}\",\n  \"propertyAddress\": \"123 Main St, City, ST 12345\",\n  \"status\": \"application\",\n  \"source\": \"retail\",\n  \"milestones\": [\n    { \"name\": \"Application Submitted\", \"status\": \"completed\" },\n    { \"name\": \"Documentation Review\", \"status\": \"in_progress\" },\n    { \"name\": \"Underwriting\", \"status\": \"pending\" }\n  ]\n}"
            }
          }
        },
        { "name": "Get Loan By Id", "request": { "method": "GET", "url": "{{baseUrl}}/loans/{{loanId}}" } },
        {
          "name": "Update Loan Status",
          "request": {
            "method": "PATCH",
            "url": "{{baseUrl}}/loans/{{loanId}}/status",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": { 
              "mode": "raw", 
              "raw": "{\n  \"status\": \"underwriting\",\n  \"milestones\": [\n    { \"name\": \"Application Submitted\", \"status\": \"completed\" },\n    { \"name\": \"Documentation Review\", \"status\": \"completed\" },\n    { \"name\": \"Underwriting\", \"status\": \"in_progress\" },\n    { \"name\": \"Final Approval\", \"status\": \"pending\" }\n  ]\n}" 
            }
          }
        }
      ]
    },
    {
      "name": "Documents",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        { "name": "List For Loan", "request": { "method": "GET", "url": "{{baseUrl}}/documents/{{loanId}}" } },
        {
          "name": "Upload Document",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/documents",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loan\": \"{{loanId}}\",\n  \"name\": \"W2_2024.pdf\",\n  \"type\": \"pdf\",\n  \"size\": 245760,\n  \"hash\": \"sha256:abc123def456\",\n  \"url\": \"https://storage.example.com/docs/w2_2024.pdf\"\n}"
            }
          }
        },
        { "name": "Mark Synced", "request": { "method": "POST", "url": "{{baseUrl}}/documents/{{documentId}}/synced" } }
      ]
    },
    {
      "name": "Notifications",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        { "name": "List Notifications", "request": { "method": "GET", "url": "{{baseUrl}}/notifications" } },
        {
          "name": "Create Notification",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/notifications",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"New Document Required\",\n  \"message\": \"Please upload your recent pay stubs\",\n  \"user\": \"{{userId}}\",\n  \"type\": \"document_request\",\n  \"forceSend\": false\n}"
            }
          }
        },
        { "name": "Mark Read", "request": { "method": "POST", "url": "{{baseUrl}}/notifications/{{notificationId}}/read" } }
      ]
    },
    {
      "name": "Users",
      "auth": { "type": "bearer", "bearer": [{ "key": "token", "value": "{{authToken}}", "type": "string" }] },
      "item": [
        { "name": "Me", "request": { "method": "GET", "url": "{{baseUrl}}/users/me" } }
      ]
    }
  ]
}